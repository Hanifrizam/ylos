<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YLOS 2026 - Youth Leader Organization Summit</title>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L9GFQ0GM95"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-L9GFQ0GM95');
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        ylosPink: '#FF85B3',
                        ylosDarkPink: '#DB2777',
                        ylosYellow: '#FFD700',
                        ylosGreen: '#9ACD32',
                        ylosDark: '#111827',
                    },
                    fontFamily: { sans: ['Plus Jakarta Sans', 'sans-serif'] },
                    animation: {
                        'blob': 'blob 7s infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <script>
        async function initTracking() {
            const { data: { session } } = await supabaseClient.auth.getSession();
            if(session) {
                const channel = supabaseClient.channel('online-users', {
                    config: { presence: { key: session.user.id } }
                });

                channel.on('presence', { event: 'sync' }, () => {
                    // User online
                }).subscribe(async (status) => {
                    if (status === 'SUBSCRIBED') {
                        const userState = {
                            email: session.user.email,
                            page: window.location.hash || 'Home',
                            login_time: new Date().toLocaleTimeString()
                        };
                        await channel.track(userState);
                    }
                });

                window.addEventListener('hashchange', async () => {
                    const newState = {
                        email: session.user.email,
                        page: window.location.hash || 'Home',
                        login_time: new Date().toLocaleTimeString()
                    };
                    await channel.track(newState);
                });
            }
        }
        setTimeout(initTracking, 2000); 
    </script>

    <style>
        /* FIX PENTING: Gunakan !important agar tidak tertimpa class 'flex' dari Tailwind */
        .hidden-section { display: none !important; }
        .active-section { display: block; animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1); }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Glassmorphism Utilities */
        .glass { background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.5); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #FF85B3; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #DB2777; }

        /* SweetAlert Styling Match */
        div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm {
            background-color: #FF85B3 !important;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(255, 133, 179, 0.4);
        }
    </style>
</head>
<body class="font-sans text-gray-800 bg-gray-50 antialiased overflow-x-hidden selection:bg-ylosPink selection:text-white">

    <nav class="fixed w-full z-50 transition-all duration-300 top-0 left-0">
        <div class="glass shadow-sm w-full">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    
                    <div class="flex items-center gap-3 cursor-pointer group flex-shrink-0" onclick="showPage('home')">
                        <img src="LOGO YLOS 5x5.png" alt="Logo" class="h-10 md:h-12 w-auto object-contain transition-transform transform group-hover:scale-110 duration-300">
                        <div class="flex flex-col justify-center">
                            <span class="font-extrabold text-xl md:text-2xl tracking-tighter text-gray-900 leading-none group-hover:text-ylosPink transition">YLOS</span>
                            <span class="text-[0.6rem] font-bold tracking-[0.2em] text-gray-400 uppercase group-hover:text-gray-600 transition">Summit 2026</span>
                        </div>
                    </div>

                    <div class="md:hidden">
                        <button onclick="toggleMobileMenu()" class="text-gray-600 focus:outline-none p-2 bg-gray-50 rounded-xl hover:bg-gray-100 transition shadow-sm">
                            <i class="fa-solid fa-bars text-xl"></i>
                        </button>
                    </div>

                    <div id="nav-desktop-links" class="hidden md:flex items-center space-x-1">
                        <a href="#home" onclick="showPage('home')" class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-ylosPink hover:bg-pink-50 rounded-full transition">Beranda</a>
                        <a href="#about" onclick="showPage('home')" class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-ylosPink hover:bg-pink-50 rounded-full transition">Tentang</a>
                        <a href="#speakers" onclick="showPage('home')" class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-ylosPink hover:bg-pink-50 rounded-full transition">Pembicara</a>
                        <a href="#trip" onclick="showPage('home')" class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-ylosPink hover:bg-pink-50 rounded-full transition">Trip</a>
                        <a href="#pricing" onclick="showPage('home')" class="px-4 py-2 text-sm font-semibold text-gray-600 hover:text-ylosPink hover:bg-pink-50 rounded-full transition">Daftar</a>
                        <a href="admin.html" id="nav-desktop-admin" class="hidden ml-4 text-pink-600 font-bold text-xs border border-pink-200 px-4 py-2 rounded-full bg-pink-50 hover:bg-pink-100 transition shadow-sm">ADMIN PANEL</a>
                    </div>

                    <div class="hidden md:block">
                        <div id="nav-public" class="flex items-center gap-3">
                            <button onclick="showPage('login')" class="text-gray-600 hover:text-ylosPink font-bold px-5 py-2 text-sm transition">Masuk</button>
                            <button onclick="showPage('register')" class="bg-gradient-to-r from-ylosPink to-rose-500 text-white px-6 py-2.5 rounded-full font-bold text-sm shadow-lg shadow-pink-200 hover:shadow-xl hover:-translate-y-0.5 transition duration-300">Daftar Sekarang</button>
                        </div>
                        <div id="nav-member" class="hidden flex items-center gap-4">
                            <div class="flex flex-col text-right mr-2">
                                <span class="text-[10px] text-gray-400 font-bold uppercase tracking-wider">Logged in as</span>
                                <span id="user-display-name" class="text-sm font-bold text-gray-900 leading-none">User</span>
                            </div>
                            
                            <button id="btn-dash-user" onclick="showPage('dashboard')" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-5 py-2.5 rounded-full font-bold text-sm transition">Dashboard</button>
                            <button id="btn-dash-admin" onclick="window.location.href='admin.html'" class="hidden bg-gray-900 text-white px-5 py-2.5 rounded-full font-bold text-xs hover:bg-black transition shadow-lg">Kontrol Admin</button>
                            
                            <button onclick="logout()" class="w-10 h-10 flex items-center justify-center rounded-full border border-gray-200 text-red-500 hover:bg-red-50 transition" title="Keluar"><i class="fa-solid fa-power-off"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden bg-white/95 backdrop-blur-xl border-t border-gray-100 shadow-2xl absolute w-full left-0 top-20 z-40 p-4 rounded-b-3xl">
            <div class="space-y-2">
                <a href="#home" onclick="mobileLinkClick('home')" class="block px-4 py-3 rounded-xl text-base font-semibold text-gray-700 hover:bg-pink-50 hover:text-ylosPink transition"><i class="fa-solid fa-house w-6 text-center"></i> Beranda</a>
                <a href="#about" onclick="mobileLinkClick('home')" class="block px-4 py-3 rounded-xl text-base font-semibold text-gray-700 hover:bg-pink-50 hover:text-ylosPink transition"><i class="fa-solid fa-circle-info w-6 text-center"></i> Tentang</a>
                <a href="#trip" onclick="mobileLinkClick('home')" class="block px-4 py-3 rounded-xl text-base font-semibold text-gray-700 hover:bg-pink-50 hover:text-ylosPink transition"><i class="fa-solid fa-plane w-6 text-center"></i> Trip & IPB</a>
                <a href="#pricing" onclick="mobileLinkClick('home')" class="block px-4 py-3 rounded-xl text-base font-semibold text-gray-700 hover:bg-pink-50 hover:text-ylosPink transition"><i class="fa-solid fa-ticket w-6 text-center"></i> Pendaftaran</a>
                
                <div class="h-px bg-gray-100 my-4"></div>
                
                <div id="mobile-nav-public" class="space-y-3">
                    <button onclick="mobileLinkClick('login')" class="w-full text-left px-4 py-3 text-base font-bold text-gray-600 hover:bg-gray-50 rounded-xl transition"><i class="fa-solid fa-right-to-bracket w-6 text-center"></i> Masuk</button>
                    <button onclick="mobileLinkClick('register')" class="w-full bg-gradient-to-r from-ylosPink to-rose-500 text-white px-5 py-3.5 rounded-xl font-bold shadow-lg"><i class="fa-solid fa-user-plus mr-2"></i> Daftar Akun</button>
                </div>

                <div id="mobile-nav-member" class="hidden space-y-3">
                    <div class="px-4 py-3 bg-gray-50 rounded-xl border border-gray-100 flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center text-ylosPink font-bold text-xl">Hi</div>
                        <div>
                            <span id="mobile-user-name" class="text-sm font-bold text-gray-900 block truncate max-w-[200px]">User</span>
                            <span class="text-xs text-green-600 font-bold flex items-center gap-1"><span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> Online</span>
                        </div>
                    </div>
                    <button id="btn-mobile-dash-user" onclick="mobileLinkClick('dashboard')" class="w-full text-left px-4 py-3.5 text-base font-bold text-white bg-ylosPink hover:bg-rose-500 rounded-xl shadow-md transition">üìä Buka Dashboard</button>
                    <button id="btn-mobile-dash-admin" onclick="window.location.href='admin.html'" class="hidden w-full text-left px-4 py-3.5 text-base font-bold text-white bg-gray-900 rounded-xl shadow-md transition">üõ†Ô∏è Kontrol Admin</button>
                    <button onclick="logout()" class="w-full text-left px-4 py-3 text-base font-bold text-red-500 hover:bg-red-50 rounded-xl transition"><i class="fa-solid fa-power-off w-6 text-center"></i> Keluar</button>
                </div>
            </div>
        </div>
    </nav>

    <div id="page-home" class="active-section">
        
        <section id="home" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden px-4">
            <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10">
                <div class="blob bg-ylosPink/20 w-96 h-96 rounded-full top-0 left-0 mix-blend-multiply filter blur-3xl animate-blob"></div>
                <div class="blob bg-ylosYellow/20 w-96 h-96 rounded-full top-0 right-0 mix-blend-multiply filter blur-3xl animate-blob animation-delay-2000"></div>
                <div class="blob bg-purple-300/20 w-96 h-96 rounded-full -bottom-8 left-20 mix-blend-multiply filter blur-3xl animate-blob animation-delay-4000"></div>
            </div>

            <div class="max-w-7xl mx-auto text-center relative z-10">
                <div class="inline-flex items-center gap-2 py-2 px-5 rounded-full bg-white/80 border border-pink-100 shadow-sm mb-8 backdrop-blur-sm animate-fade-in-up">
                    <span class="relative flex h-2 w-2">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                    </span>
                    <span class="text-xs font-bold tracking-wide text-gray-600 uppercase">Batch 1 Early Bird (Februari 2026)</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-extrabold text-gray-900 tracking-tight mb-8 leading-[1.1]">
                    Be <span class="text-transparent bg-clip-text bg-gradient-to-r from-ylosPink to-purple-600">Relevant.</span><br>
                    Shape <span class="text-transparent bg-clip-text bg-gradient-to-r from-ylosGreen to-teal-500">Character.</span><br>
                    Lead the Future.
                </h1>
                
                <p class="mt-6 text-lg md:text-xl text-gray-500 max-w-3xl mx-auto mb-10 leading-relaxed font-medium">
                    YLOS 2026 hadir sebagai Game Changer. Pelatihan intensif 4 Hari di Bogor, Campus Immersion ke IPB University, dan kesempatan Student Exchange ke Malaysia.
                </p>
                
                <div class="flex flex-col sm:flex-row justify-center gap-4 px-4">
                    <button onclick="showPage('register')" class="bg-gray-900 text-white px-10 py-4 rounded-full font-bold text-lg shadow-xl shadow-gray-300 hover:bg-black transition transform hover:-translate-y-1 hover:scale-105 duration-300 w-full sm:w-auto">
                        Daftar Seleksi
                    </button>
                    <a href="#trip" class="bg-white text-gray-800 border border-gray-200 px-10 py-4 rounded-full font-bold text-lg shadow-md hover:shadow-lg hover:border-ylosPink hover:text-ylosPink transition flex items-center justify-center gap-2 group w-full sm:w-auto">
                        Lihat Program <i class="fa-solid fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                    </a>
                </div>
            </div>
        </section>

        <section id="about" class="py-20 md:py-32 bg-white">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">The Game Changer</h2>
                    <p class="text-gray-500">Transformasi Organisasi Sekolah Masa Kini</p>
                    <div class="h-1.5 w-24 bg-gradient-to-r from-ylosPink to-ylosYellow mx-auto rounded-full mt-4"></div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="bg-gray-50 p-8 rounded-[2rem] hover:bg-white hover:shadow-2xl border border-transparent hover:border-pink-100 transition duration-300 group">
                        <div class="w-16 h-16 bg-pink-100 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-3xl">ü©∫</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 text-gray-900">1-on-1 Clinic</h3>
                        <p class="text-gray-600 leading-relaxed">Bedah masalah organisasimu (dana macet, kaderisasi pasif) langsung dengan mentor ahli.</p>
                    </div>
                    <div class="bg-gray-50 p-8 rounded-[2rem] hover:bg-white hover:shadow-2xl border border-transparent hover:border-yellow-100 transition duration-300 group">
                        <div class="w-16 h-16 bg-yellow-100 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-3xl">üéì</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 text-gray-900">Campus Immersion</h3>
                        <p class="text-gray-600 leading-relaxed">Rasakan kuliah sehari di IPB University. Kunjungi Techno Park dan diskusi dengan BEM IPB.</p>
                    </div>
                    <div class="bg-gray-50 p-8 rounded-[2rem] hover:bg-white hover:shadow-2xl border border-transparent hover:border-green-100 transition duration-300 group">
                        <div class="w-16 h-16 bg-green-100 rounded-2xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300">
                            <span class="text-3xl">‚úàÔ∏è</span>
                        </div>
                        <h3 class="text-2xl font-bold mb-3 text-gray-900">Global Opportunity</h3>
                        <p class="text-gray-600 leading-relaxed">Best Delegates berkesempatan mendapatkan beasiswa Student Exchange ke Malaysia.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="speakers" class="py-20 bg-gray-900 text-white overflow-hidden">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="text-center mb-12">
                    <span class="text-ylosYellow font-bold tracking-widest uppercase text-xs">Expert & Leaders</span>
                    <h2 class="text-3xl md:text-5xl font-bold mt-2">Meet Our Speakers</h2>
                </div>
                
                <div class="flex flex-wrap justify-center gap-6">
                    <div class="w-40 md:w-56 text-center group">
                        <div class="w-40 h-40 md:w-56 md:h-56 rounded-full overflow-hidden border-4 border-gray-700 group-hover:border-ylosPink transition duration-300 mx-auto mb-4 relative">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/e/eb/Anies_Baswedan_2017.jpg" alt="Anies Baswedan" class="w-full h-full object-cover filter grayscale group-hover:grayscale-0 transition duration-500">
                        </div>
                        <h3 class="font-bold text-lg">Anies Baswedan</h3>
                        <p class="text-xs text-gray-400">Ex-Mendikbud RI</p>
                    </div>

                    <div class="w-40 md:w-56 text-center group">
                        <div class="w-40 h-40 md:w-56 md:h-56 rounded-full overflow-hidden border-4 border-gray-700 group-hover:border-ylosPink transition duration-300 mx-auto mb-4 relative">
                            <img src="https://assets.kompasiana.com/items/album/2021/08/23/salman-subakat-612349be06310e30932a3162.jpg" alt="Salman Subakat" class="w-full h-full object-cover filter grayscale group-hover:grayscale-0 transition duration-500">
                        </div>
                        <h3 class="font-bold text-lg">Salman Subakat</h3>
                        <p class="text-xs text-gray-400">Co-Founder ParagonCorp</p>
                    </div>

                    <div class="w-40 md:w-56 text-center group">
                        <div class="w-40 h-40 md:w-56 md:h-56 rounded-full overflow-hidden border-4 border-gray-700 group-hover:border-ylosPink transition duration-300 mx-auto mb-4 relative">
                            <div class="w-full h-full bg-gray-800 flex items-center justify-center text-4xl">üéì</div>
                        </div>
                        <h3 class="font-bold text-lg">Deris Nagara</h3>
                        <p class="text-xs text-gray-400">Ex-Presiden BEM Columbia Univ.</p>
                    </div>

                    <div class="w-40 md:w-56 text-center group">
                        <div class="w-40 h-40 md:w-56 md:h-56 rounded-full overflow-hidden border-4 border-gray-700 group-hover:border-ylosPink transition duration-300 mx-auto mb-4 relative">
                            <div class="w-full h-full bg-gray-800 flex items-center justify-center text-4xl">üèõÔ∏è</div>
                        </div>
                        <h3 class="font-bold text-lg">Manik Margahamahendra</h3>
                        <p class="text-xs text-gray-400">Executive Director ICTYC</p>
                    </div>
                </div>
                
                <p class="text-center text-gray-500 text-sm mt-10">*Dan masih banyak lagi pemimpin inspiratif lainnya.</p>
            </div>
        </section>

        <section id="trip" class="py-20 md:py-32 relative overflow-hidden bg-white">
            <div class="absolute top-0 right-0 -mr-40 -mt-40 w-[30rem] h-[30rem] bg-ylosPink/5 rounded-full blur-[100px]"></div>

            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-5xl font-extrabold mb-4 text-gray-900">Program Highlights</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">Dari kampus terbaik bangsa hingga warisan sejarah, dan peluang ke kancah global.</p>
                </div>

                <div class="flex flex-col lg:flex-row items-center gap-12 lg:gap-20 mb-20">
                    <div class="lg:w-1/2">
                        <span class="inline-block py-1 px-3 rounded-lg bg-green-100 text-green-700 font-bold text-xs uppercase tracking-wider mb-4">Main Event Location</span>
                        <h2 class="text-4xl font-extrabold mb-6 text-gray-900">Bogor & IPB University</h2>
                        <p class="text-gray-600 text-lg mb-6 leading-relaxed">
                            Pusat kegiatan selama 4 hari 3 malam. Kamu akan merasakan atmosfer akademik di <strong>IPB University</strong> (Ranking #1 Science Techno Park) dan menjelajahi <strong>Bogor Heritage</strong> (Kebun Raya & Museum Kepresidenan).
                        </p>
                        <ul class="space-y-3">
                            <li class="flex items-center gap-3"><i class="fa-solid fa-flask text-ylosGreen"></i> Visit Teaching Industry & Techno Park</li>
                            <li class="flex items-center gap-3"><i class="fa-solid fa-tree text-ylosGreen"></i> Explore Kebun Raya Bogor (Tertua di ASEAN)</li>
                            <li class="flex items-center gap-3"><i class="fa-solid fa-landmark text-ylosGreen"></i> Museum PETA & Balai Kirti</li>
                        </ul>
                    </div>
                    <div class="lg:w-1/2 w-full">
                        <div class="relative rounded-3xl overflow-hidden shadow-2xl">
                            <img src="https://bogor-kita.com/wp-content/uploads/2022/10/Rektorat-IPB.jpg" alt="IPB University" class="w-full h-auto object-cover">
                            <div class="absolute bottom-0 left-0 bg-gradient-to-t from-black/80 to-transparent w-full p-6">
                                <p class="text-white font-bold"><i class="fa-solid fa-location-dot text-ylosGreen"></i> IPB University Dramaga</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col-reverse lg:flex-row items-center gap-12 lg:gap-20">
                    <div class="lg:w-1/2 w-full">
                        <div class="relative rounded-3xl overflow-hidden shadow-2xl border-4 border-ylosYellow">
                            <img src="https://images.unsplash.com/photo-1596422846543-75c6fc197f07?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" alt="Malaysia" class="w-full h-auto object-cover">
                            <div class="absolute top-4 right-4 bg-ylosYellow text-black font-bold px-4 py-2 rounded-full shadow-lg animate-pulse">
                                üèÜ Exclusive Reward
                            </div>
                        </div>
                    </div>
                    <div class="lg:w-1/2">
                        <span class="inline-block py-1 px-3 rounded-lg bg-yellow-100 text-yellow-700 font-bold text-xs uppercase tracking-wider mb-4">Special Opportunity</span>
                        <h2 class="text-4xl font-extrabold mb-6 text-gray-900">Student Exchange: Malaysia</h2>
                        <p class="text-gray-600 text-lg mb-6 leading-relaxed">
                            Bagi peserta terpilih (Best Delegates), dapatkan kesempatan emas mengikuti <strong>Student Exchange Scholarship</strong> ke Malaysia. Kunjungi Universiti Malaya, Petronas, dan rasakan toleransi budaya global.
                        </p>
                        <p class="text-sm text-gray-400 italic">*Khusus bagi delegasi terbaik yang terpilih di akhir acara.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="pricing" class="py-20 md:py-32 bg-gray-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">Mulai Langkahmu Sekarang</h2>
                <p class="text-gray-500 mb-12 max-w-2xl mx-auto">Pilih jalur pendaftaranmu. Tersedia jalur Beasiswa Penuh (Fully Funded), Partial, dan Mandiri.</p>
                
                <div class="bg-white p-8 rounded-3xl shadow-lg max-w-3xl mx-auto border border-gray-100">
                    <h3 class="text-2xl font-bold text-gray-900 mb-2">Commitment Fee (Biaya Seleksi)</h3>
                    <p class="text-gray-500 text-sm mb-8">Biaya ini digunakan untuk mengakses Selection Bootcamp, Webinar, dan Sertifikat Seleksi Nasional.</p>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="border-2 border-green-500 bg-green-50 p-6 rounded-2xl relative overflow-hidden">
                            <div class="absolute top-0 right-0 bg-green-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl">BEST DEAL</div>
                            <h4 class="font-bold text-gray-900">Early Bird</h4>
                            <p class="text-xs text-gray-500 mb-2">s.d 28 Feb 2026</p>
                            <p class="text-3xl font-extrabold text-green-600">79k</p>
                        </div>
                        
                        <div class="border border-gray-200 p-6 rounded-2xl hover:border-ylosPink transition">
                            <h4 class="font-bold text-gray-900">Regular</h4>
                            <p class="text-xs text-gray-500 mb-2">01 - 31 Mar 2026</p>
                            <p class="text-3xl font-extrabold text-gray-800">99k</p>
                        </div>

                        <div class="border border-gray-200 p-6 rounded-2xl hover:border-ylosPink transition">
                            <h4 class="font-bold text-gray-900">Last Call</h4>
                            <p class="text-xs text-gray-500 mb-2">01 - 25 Apr 2026</p>
                            <p class="text-3xl font-extrabold text-gray-800">129k</p>
                        </div>
                    </div>

                    <div class="mt-8 text-left bg-gray-50 p-6 rounded-xl text-sm text-gray-600 space-y-2">
                        <p class="font-bold text-gray-900">Apa yang kamu dapatkan di tahap seleksi?</p>
                        <ul class="list-disc pl-5 space-y-1">
                            <li>Tiket Seleksi Nasional YLOS 2026</li>
                            <li>Webinar Exclusive: "How to Ace Scholarship Essay"</li>
                            <li>E-Sertifikat Tingkat Nasional (untuk portofolio SNBP)</li>
                            <li>Peluang lolos sebagai <strong>Fully Funded Delegate</strong> (Gratis Biaya Program)</li>
                        </ul>
                    </div>

                    <button onclick="showPage('register')" class="w-full mt-8 py-4 rounded-2xl bg-gradient-to-r from-ylosPink to-rose-500 text-white font-bold text-lg shadow-lg hover:shadow-xl hover:-translate-y-1 transition duration-300">
                        Daftar Seleksi Sekarang
                    </button>
                </div>
            </div>
        </section>

        <footer class="bg-gray-900 text-white pt-20 pb-10 border-t border-gray-800">
            <div class="max-w-7xl mx-auto px-4 text-center">
                <div class="mb-8 flex justify-center items-center gap-4">
                    <img src="LOGO YLOS 5x5.png" alt="Logo" class="h-12 w-auto brightness-0 invert opacity-80 hover:opacity-100 transition">
                    <div class="text-left">
                        <span class="font-bold text-2xl tracking-tight block">YLOS 2026</span>
                        <span class="text-xs text-gray-500 uppercase tracking-widest">Youth Leader Organization Summit</span>
                    </div>
                </div>
                <p class="text-gray-400 mb-10 max-w-md mx-auto text-sm leading-relaxed">Be Relevant, Shape Character, Lead the Future.</p>
                <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-gray-600">
                    <p>¬© 2026 Youth Leader Organization Summit. All rights reserved.</p>
                    <div class="flex gap-6">
                        <a href="#" class="hover:text-white transition">Privacy Policy</a>
                        <a href="#" class="hover:text-white transition">Terms of Service</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <div id="page-login" class="hidden-section pt-32 pb-20 min-h-screen px-4 bg-gray-50 flex items-center justify-center">
        <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10">
            <div class="blob bg-ylosPink/10 w-[40rem] h-[40rem] rounded-full top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 blur-3xl"></div>
        </div>

        <div class="w-full max-w-md bg-white p-8 md:p-10 rounded-3xl shadow-2xl border border-white/50 backdrop-blur-lg">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-pink-50 rounded-2xl flex items-center justify-center mx-auto mb-4 text-3xl">üëã</div>
                <h2 class="text-3xl font-bold text-gray-900">Welcome Back!</h2>
                <p class="text-gray-500 text-sm mt-2">Masuk untuk mengakses dashboard seleksi.</p>
            </div>

            <form onsubmit="handleLogin(event)" class="space-y-5">
                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">Email Address</label>
                    <input type="email" id="login-email" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition font-medium" placeholder="nama@email.com">
                </div>
                <div>
                    <div class="flex justify-between items-center mb-2">
                        <label class="block text-sm font-bold text-gray-700">Password</label>
                        <a href="reset.html" class="text-xs font-bold text-ylosPink hover:underline">Lupa Password?</a>
                    </div>
                    <input type="password" id="login-password" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition font-medium" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                </div>
                <button type="submit" class="w-full bg-gray-900 text-white font-bold py-4 rounded-xl hover:bg-black transition shadow-lg hover:-translate-y-0.5 transform duration-200">Masuk Sekarang</button>
            </form>
            
            <p class="text-center mt-8 text-sm text-gray-500">Belum punya akun? <button onclick="showPage('register')" class="text-ylosPink font-bold hover:underline">Daftar Seleksi</button></p>
            <div class="mt-6 text-center">
                <button onclick="showPage('home')" class="text-xs text-gray-400 hover:text-gray-600 transition">‚Üê Kembali ke Beranda</button>
            </div>
        </div>
    </div>

    <div id="page-register" class="hidden-section pt-32 pb-20 min-h-screen px-4 bg-gray-50 flex items-center justify-center">
        <div class="w-full max-w-lg bg-white p-8 md:p-10 rounded-3xl shadow-2xl border border-white/50 backdrop-blur-lg">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-gray-900">Daftar YLOS 2026 üöÄ</h2>
                <p class="text-gray-500 text-sm mt-2">Langkah awal menuju Fully Funded Delegate.</p>
            </div>
            
            <form onsubmit="handleRegister(event)" class="space-y-5">
                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">Nama Lengkap</label>
                    <input type="text" id="reg-name" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition" placeholder="Sesuai KTP/Kartu Pelajar">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    <div>
                        <label class="block text-sm font-bold mb-2 text-gray-700">Asal Sekolah</label>
                        <input type="text" id="reg-school" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition" placeholder="SMA/SMK...">
                    </div>
                    <div>
                        <label class="block text-sm font-bold mb-2 text-gray-700">No. WhatsApp</label>
                        <input type="tel" id="reg-phone" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition" placeholder="0812...">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">Email Aktif</label>
                    <input type="email" id="reg-email" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition" placeholder="email@sekolah.com">
                </div>
                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">Password</label>
                    <input type="password" id="reg-password" required class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition" placeholder="Minimal 6 karakter">
                </div>
                <div>
                    <label class="block text-sm font-bold mb-2 text-gray-700">Jalur Pendaftaran</label>
                    <div class="relative">
                        <select id="reg-package" class="w-full px-5 py-3.5 rounded-xl border border-gray-200 bg-gray-50 focus:bg-white focus:border-ylosPink focus:ring-4 focus:ring-pink-50 outline-none transition appearance-none">
                            <option value="Jalur Seleksi (Commitment Fee)">Jalur Seleksi - Commitment Fee</option>
                            <option value="Self Funded (Jalur Mandiri)">Self Funded - Jalur Mandiri</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500"><i class="fa-solid fa-chevron-down"></i></div>
                    </div>
                    <p class="text-xs text-gray-400 mt-1">*Pilih "Jalur Seleksi" untuk kesempatan Fully Funded.</p>
                </div>

                <div class="bg-yellow-50 p-4 rounded-xl border border-yellow-100 flex flex-col gap-2">
                    <label class="block text-xs font-bold text-yellow-800 uppercase tracking-wide">Verifikasi Keamanan</label>
                    <div class="flex items-center gap-3">
                        <div id="captcha-question" class="bg-white text-gray-800 px-4 py-3 rounded-lg font-mono font-bold text-lg border border-yellow-200 min-w-[100px] text-center shadow-sm">...</div>
                        <input type="number" id="captcha-input" required class="w-full px-4 py-3 rounded-lg border border-yellow-200 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100 outline-none transition" placeholder="Hasil?">
                    </div>
                </div>

                <button type="submit" id="btn-reg" class="w-full bg-gradient-to-r from-ylosPink to-rose-500 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition duration-300">Daftar Sekarang</button>
            </form>
            <p class="text-center mt-6 text-sm text-gray-500">Sudah punya akun? <button onclick="showPage('login')" class="text-ylosPink font-bold hover:underline">Login disini</button></p>
        </div>
    </div>

    <div id="page-dashboard" class="hidden-section pt-28 pb-20 min-h-screen bg-gray-50">
        <div class="max-w-6xl mx-auto px-4 md:px-6">
            
            <div class="bg-gradient-to-r from-gray-900 to-gray-800 rounded-3xl p-8 md:p-10 text-white mb-10 shadow-2xl relative overflow-hidden">
                <div class="relative z-10">
                    <div class="inline-block px-3 py-1 bg-white/10 rounded-full text-xs font-bold uppercase tracking-widest mb-3 backdrop-blur-sm border border-white/10">Member Area</div>
                    <h2 class="text-2xl md:text-3xl font-bold mb-2">Halo, <span id="dash-name" class="text-transparent bg-clip-text bg-gradient-to-r from-ylosPink to-ylosYellow">Leader!</span> üëã</h2>
                    <p class="opacity-80 text-sm md:text-base max-w-xl">Selamat datang di dashboard peserta YLOS 2026. Pantau status dan akses materimu di sini.</p>
                </div>
                <div class="absolute right-0 top-0 h-full w-1/2 bg-gradient-to-l from-ylosPink/20 to-transparent skew-x-12 transform translate-x-20"></div>
                <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-ylosYellow/20 rounded-full blur-3xl"></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                
                <div class="md:col-span-1 space-y-6">
                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100 hover:shadow-md transition duration-300">
                        <h3 class="text-lg font-bold text-gray-900 mb-6 flex items-center gap-2"><i class="fa-solid fa-wallet text-gray-400"></i> Invoice & Payment</h3>
                        
                        <div class="space-y-4">
                            <div class="bg-gray-50 p-5 rounded-2xl border border-gray-100">
                                <p class="text-[10px] text-gray-400 uppercase font-bold tracking-widest mb-1">Paket Dipilih</p>
                                <p id="dash-package" class="text-xl font-extrabold text-gray-900">Loading...</p>
                            </div>
                            
                            <div class="bg-gray-50 p-5 rounded-2xl border border-gray-100 flex justify-between items-center">
                                <div>
                                    <p class="text-[10px] text-gray-400 uppercase font-bold tracking-widest mb-1">Status</p>
                                    <span id="dash-status" class="inline-block px-3 py-1 bg-gray-200 text-gray-600 rounded-full text-xs font-bold">Loading...</span>
                                </div>
                                <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm text-gray-400">
                                    <i class="fa-solid fa-file-invoice"></i>
                                </div>
                            </div>
                            
                            <div id="payment-actions">
                                <button onclick="openLynkPayment()" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white py-4 rounded-2xl font-bold text-sm shadow-lg shadow-indigo-200 transition transform hover:-translate-y-0.5 flex items-center justify-center gap-2 animate-pulse">
                                    üí≥ Bayar & Finalisasi
                                </button>
                                <p class="text-center text-xs text-gray-400 mt-3 flex justify-center items-center gap-1"><i class="fa-solid fa-lock"></i> Secured by LYNK</p>
                                <button onclick="contactAdmin()" class="w-full mt-3 border border-gray-200 text-gray-500 py-3 rounded-xl font-bold text-xs hover:bg-gray-50 hover:text-gray-700 transition">Butuh Bantuan?</button>
                            </div>
                            
                            <div id="wa-group-access" class="hidden space-y-3 pt-2">
                                <button onclick="joinWaGroup()" class="w-full bg-[#25D366] hover:bg-[#128C7E] text-white py-4 rounded-2xl font-bold text-sm transition shadow-lg flex items-center justify-center gap-2">
                                    <i class="fa-brands fa-whatsapp text-xl"></i> Gabung Grup WhatsApp
                                </button>
                                <p class="text-xs text-green-600 text-center font-bold bg-green-50 py-2 rounded-lg">Akses Khusus Member Lunas</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white p-6 rounded-3xl shadow-sm border border-gray-100">
                        <h3 class="text-lg font-bold text-gray-900 mb-4">üì¢ Info Akun</h3>
                        <div class="flex gap-4 items-start">
                            <div class="w-10 h-10 rounded-full bg-pink-50 flex items-center justify-center text-ylosPink flex-shrink-0 mt-1">
                                <i class="fa-solid fa-circle-info"></i>
                            </div>
                            <div>
                                <p id="dash-announce-title" class="font-bold text-gray-800 text-sm">Menunggu Pembayaran</p>
                                <p id="dash-announce-desc" class="text-xs text-gray-500 mt-1 leading-relaxed">Silakan selesaikan pembayaran. Admin akan memverifikasi maks. 1x24 jam.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="md:col-span-2 space-y-8">
                    
                    <div id="announcement-container" class="hidden">
                        <div class="flex items-center gap-3 mb-4">
                            <h3 class="text-xl font-bold text-gray-900">Pengumuman Terbaru</h3>
                            <div class="h-px bg-gray-200 flex-1"></div>
                        </div>
                        <div id="announcement-content" class="space-y-4">
                            </div>
                    </div>

                    <div>
                        <div class="flex items-center gap-3 mb-6">
                            <div class="w-8 h-8 rounded-lg bg-purple-100 flex items-center justify-center text-purple-600"><i class="fa-solid fa-book-open"></i></div>
                            <h3 class="text-xl font-bold text-gray-900">Modul & Materi</h3>
                        </div>
                        
                        <div class="bg-white p-6 md:p-8 rounded-3xl shadow-sm border border-gray-100 min-h-[200px]">
                            <div id="modules-content" class="space-y-4">
                                <div class="flex flex-col items-center justify-center py-10 text-gray-400">
                                    <i class="fa-solid fa-folder-open text-4xl mb-3 opacity-50"></i>
                                    <p class="text-sm italic">Belum ada materi yang diposting admin.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script>
        const supabaseClient = supabase.createClient(
            'https://jrslgkxwjvugvgakxwsd.supabase.co', 
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Impyc2xna3h3anZ1Z3ZnYWt4d3NkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk4MTYyNDYsImV4cCI6MjA4NTM5MjI0Nn0.q2GGd0kdKt7KGWt7QpfeP0UUBOStmuUH51caPoCrmMk'
        );
        
        const LYNK_PAYMENT_URL = "https://youthleaderorganizationsummit.id/ylos.id/er400x4wrlp1/checkout?token=cGFyYW1zPSU1QiU1RCZiaWRfcHJpY2U9MCZxdHlfcHJvZD0x";
        const WA_GROUP_LINK = "https://chat.whatsapp.com/GANTIDENGANLINKGRUPMU"; 
        
        let userSession = null;
        let captchaCorrectAnswer = 0;

        function generateCaptcha() {
            const n1 = Math.floor(Math.random()*10)+1, n2 = Math.floor(Math.random()*10)+1;
            captchaCorrectAnswer = n1 + n2;
            document.getElementById('captcha-question').innerText = `${n1} + ${n2} = ?`;
            document.getElementById('captcha-input').value = '';
        }

        function showPage(pageId) {
            if (userSession && (pageId === 'login' || pageId === 'register')) pageId = 'dashboard';
            if (pageId === 'register') generateCaptcha();

            ['page-home', 'page-login', 'page-register', 'page-dashboard'].forEach(id => {
                document.getElementById(id).classList.remove('active-section');
                document.getElementById(id).classList.add('hidden-section');
            });
            document.getElementById('page-' + pageId).classList.remove('hidden-section');
            document.getElementById('page-' + pageId).classList.add('active-section');
            document.getElementById('mobile-menu').classList.add('hidden');
            window.scrollTo(0,0);
        }
        
        function toggleMobileMenu() { document.getElementById('mobile-menu').classList.toggle('hidden'); }
        function mobileLinkClick(id) { showPage(id); }

        async function handleRegister(e) {
            e.preventDefault();
            
            if(parseInt(document.getElementById('captcha-input').value) !== captchaCorrectAnswer) {
                Swal.fire({ icon: 'error', title: 'Captcha Salah!', text: 'Silakan hitung ulang penjumlahan.' });
                generateCaptcha(); return;
            }

            const btn = document.getElementById('btn-reg'); 
            btn.innerText='Memproses...'; btn.disabled=true;
            
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            
            try {
                const { data: isEmailExist } = await supabaseClient.rpc('check_email_exists', { email_input: email });
                if (isEmailExist === true) {
                    Swal.fire({ 
                        icon: 'warning', 
                        title: 'Email Sudah Terdaftar! ‚ö†Ô∏è', 
                        html: `Email <b>${email}</b> sudah ada di sistem.<br>Silakan langsung login saja.`,
                        showCancelButton: true, confirmButtonText: 'Login Sekarang', cancelButtonText: 'Coba Email Lain', confirmButtonColor: '#FF85B3'
                    }).then((result) => { if (result.isConfirmed) showPage('login'); });
                    btn.innerText='Daftar Sekarang'; btn.disabled=false; generateCaptcha(); return;
                }
            } catch (err) { console.log("Gagal cek email:", err); }

            const metadata = {
                full_name: document.getElementById('reg-name').value,
                school: document.getElementById('reg-school').value,
                phone: document.getElementById('reg-phone').value,
                package_type: document.getElementById('reg-package').value
            };

            const { data, error } = await supabaseClient.auth.signUp({ 
                email: email, password: password,
                options: { emailRedirectTo: 'https://ylos.site', data: metadata }
            });

            if(error) { 
                Swal.fire({ icon: 'error', title: 'Gagal Daftar', text: error.message });
                btn.innerText='Daftar Sekarang'; btn.disabled=false; generateCaptcha(); return; 
            }

            if(data.user) {
                Swal.fire({ 
                    icon: 'success', title: 'Berhasil Mendaftar!', 
                    html: `Link verifikasi telah dikirim ke <b>${email}</b>.<br>Cek Inbox/Spam, klik linknya, lalu login.`,
                    confirmButtonText: 'Siap!'
                }).then(() => showPage('login'));
            }
            btn.innerText='Daftar Sekarang'; btn.disabled=false;
        }

        async function handleLogin(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button'); 
            const originalText = btn.innerText;
            btn.innerText = "Loading...";
            
            const { data, error } = await supabaseClient.auth.signInWithPassword({
                email: document.getElementById('login-email').value,
                password: document.getElementById('login-password').value
            });
            
            if(error) {
                let msg = error.message;
                if (msg.includes("Email not confirmed")) msg = "Email belum diverifikasi. Cek inbox/spam email kamu.";
                Swal.fire({ icon: 'error', title: 'Login Gagal', text: msg });
                btn.innerText = originalText;
            } else {
                btn.innerText = "Sukses!";
                Swal.fire({
                    icon: 'success',
                    title: 'Login Berhasil! üëã',
                    text: 'Selamat datang kembali di YLOS.',
                    timer: 1500,
                    showConfirmButton: false
                });
            }
        }

        async function logout() {
            await Swal.fire({ icon: 'success', title: 'Logout Berhasil', text: 'Sampai jumpa lagi!', timer: 1500, showConfirmButton: false });
            await supabaseClient.auth.signOut();
            userSession = null;
            window.location.reload();
        }

        function openLynkPayment() {
            Swal.fire({
                title: 'Pembayaran Dibuka üí≥',
                html: `Anda akan diarahkan ke halaman pembayaran aman via <b>LYNK</b>.`,
                imageUrl: 'LOGO YLOS 5x5.png', imageWidth: 80, imageHeight: 80,
                showCancelButton: true, confirmButtonText: 'Lanjut Bayar ‚ûî', cancelButtonText: 'Batal', confirmButtonColor: '#FF85B3', cancelButtonColor: '#d33'
            }).then((result) => { if (result.isConfirmed) window.open(LYNK_PAYMENT_URL, '_blank'); });
        }

        function joinWaGroup() { window.open(WA_GROUP_LINK, '_blank'); }
        function contactAdmin() { window.open(`https://wa.me/6281234567890?text=Halo Admin, saya butuh bantuan.`, '_blank'); }

        // DASHBOARD LOGIC (Updated UI Rendering)
        async function loadDashboard(userId) {
            const urlParams = new URLSearchParams(window.location.search);
            const isPreviewMode = urlParams.get('preview') === 'true';

            const { data: profile } = await supabaseClient.from('profiles').select('*').eq('id', userId).single();
            
            if(profile) {
                if (isPreviewMode) {
                    profile.role = 'user';
                    profile.payment_status = 'Lunas';
                    profile.full_name = "Tampilan Peserta (Preview)";
                }

                document.getElementById('dash-name').innerText = profile.full_name;
                document.getElementById('mobile-user-name').innerText = profile.full_name;
                document.getElementById('dash-package').innerText = profile.package_type;
                
                const statusEl = document.getElementById('dash-status');
                const btnPay = document.getElementById('payment-actions');
                const waGroup = document.getElementById('wa-group-access');
                const announceTitle = document.getElementById('dash-announce-title');
                const announceDesc = document.getElementById('dash-announce-desc');
                
                const isLunas = profile.payment_status === 'Lunas';

                if(isLunas) {
                    statusEl.innerText = 'LUNAS (Verified)';
                    statusEl.className = 'inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold border border-green-200';
                    btnPay.classList.add('hidden');
                    waGroup.classList.remove('hidden');
                    announceTitle.innerText = "Akun Aktif üéâ";
                    announceTitle.className = "font-bold text-green-700 text-sm";
                    announceDesc.innerText = "Selamat! Akunmu sudah terverifikasi. Silakan akses materi di samping.";
                } else {
                    statusEl.innerText = 'Menunggu Pembayaran';
                    statusEl.className = 'inline-block px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-xs font-bold border border-yellow-200';
                    btnPay.classList.remove('hidden');
                    waGroup.classList.add('hidden');
                }

                if(profile.role === 'admin') {
                    document.getElementById('nav-desktop-admin').classList.remove('hidden');
                    document.getElementById('btn-dash-user').classList.add('hidden');
                    document.getElementById('btn-dash-admin').classList.remove('hidden');
                    document.getElementById('btn-mobile-dash-user').classList.add('hidden');
                    document.getElementById('btn-mobile-dash-admin').classList.remove('hidden');
                } else {
                    document.getElementById('nav-desktop-admin').classList.add('hidden');
                    document.getElementById('btn-dash-user').classList.remove('hidden');
                    document.getElementById('btn-dash-admin').classList.add('hidden');
                    document.getElementById('btn-mobile-dash-user').classList.remove('hidden');
                    document.getElementById('btn-mobile-dash-admin').classList.add('hidden');
                    loadCMSContent(isLunas);
                }
            }
        }

        async function loadCMSContent(isLunas) {
            // Announcements
            const { data: announcements } = await supabaseClient.from('announcements').select('*').eq('is_active', true).order('order_index', {ascending: true});
            if(announcements && announcements.length > 0) {
                document.getElementById('announcement-container').classList.remove('hidden');
                const container = document.getElementById('announcement-content');
                container.innerHTML = '';
                announcements.forEach(ann => {
                    container.innerHTML += `
                        <div class="bg-blue-50/50 border-l-4 border-blue-500 p-5 rounded-r-2xl hover:bg-blue-50 transition">
                            <h4 class="font-bold text-gray-900 text-base">${ann.title}</h4>
                            <p class="text-sm text-gray-600 mt-2 leading-relaxed">${ann.content}</p>
                            <div class="flex items-center gap-2 mt-3 text-xs text-gray-400 font-medium">
                                <i class="fa-regular fa-clock"></i>
                                <span>${new Date(ann.created_at).toLocaleDateString()}</span>
                            </div>
                        </div>
                    `;
                });
            }

            // Modules
            const { data: modules } = await supabaseClient.from('modules').select('*').order('order_index', {ascending: true});
            const modContainer = document.getElementById('modules-content');
            if(modules && modules.length > 0) {
                modContainer.innerHTML = '';
                modules.forEach(mod => {
                    let isLocked = mod.is_premium && !isLunas;
                    let icon = mod.category === 'Video' ? 'fa-circle-play' : 'fa-file-lines';
                    let iconColor = mod.category === 'Video' ? 'text-red-500 bg-red-50' : 'text-blue-500 bg-blue-50';
                    
                    let action = isLocked 
                        ? `<button disabled class="flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-400 rounded-xl text-xs font-bold cursor-not-allowed"><i class="fa-solid fa-lock"></i> Terkunci</button>`
                        : `<a href="${mod.link_url}" target="_blank" class="flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-xl text-xs font-bold transition shadow-md shadow-purple-100 transform hover:-translate-y-0.5">Buka <i class="fa-solid fa-arrow-up-right-from-square"></i></a>`;
                    
                    let opacity = isLocked ? 'opacity-70 grayscale' : '';

                    modContainer.innerHTML += `
                        <div class="flex items-center justify-between p-4 border border-gray-100 rounded-2xl bg-white hover:shadow-md hover:border-purple-100 transition duration-300 ${opacity} group">
                            <div class="flex items-center gap-4">
                                <div class="${iconColor} w-12 h-12 rounded-2xl flex items-center justify-center text-xl shadow-sm group-hover:scale-110 transition-transform">
                                    <i class="fa-solid ${icon}"></i>
                                </div>
                                <div>
                                    <h4 class="font-bold text-gray-900 text-sm md:text-base group-hover:text-purple-700 transition">${mod.title}</h4>
                                    <span class="inline-block mt-1 px-2 py-0.5 bg-gray-100 text-gray-500 text-[10px] uppercase font-bold tracking-wider rounded-md">${mod.category}</span>
                                </div>
                            </div>
                            ${action}
                        </div>
                    `;
                });
            }
        }

        supabaseClient.auth.onAuthStateChange((event, session) => {
            userSession = session;
            if(event === 'PASSWORD_RECOVERY') { window.location.href = 'reset.html'; return; }
            
            const els = {
                dp: document.getElementById('nav-public'), dm: document.getElementById('nav-member'),
                mp: document.getElementById('mobile-nav-public'), mm: document.getElementById('mobile-nav-member')
            };

            if(session) {
                els.dp.classList.add('hidden'); els.mp.classList.add('hidden');
                els.dm.classList.remove('hidden'); els.mm.classList.remove('hidden');
                document.getElementById('user-display-name').innerText = session.user.email;
                loadDashboard(session.user.id);
                
                const isLoginPage = document.getElementById('page-login').classList.contains('active-section');
                const isRegisterPage = document.getElementById('page-register').classList.contains('active-section');
                if (isLoginPage || isRegisterPage) showPage('dashboard');
                if (window.location.hash === '#dashboard') showPage('dashboard');
            } else {
                els.dp.classList.remove('hidden'); els.mp.classList.remove('hidden');
                els.dm.classList.add('hidden'); els.mm.classList.add('hidden');
                if(document.getElementById('page-dashboard').classList.contains('active-section')) showPage('home');
            }
        });
    </script>
</body>
</html>
